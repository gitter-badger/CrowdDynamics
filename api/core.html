

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6.1. Core &mdash; Crowd Dynamics 1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Crowd Dynamics 1 documentation" href="../index.html"/>
        <link rel="up" title="6. API" href="index.html"/>
        <link rel="next" title="6.2. IO" href="io.html"/>
        <link rel="prev" title="6. API" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Crowd Dynamics
          

          
            
            <img src="../_static/logo.svg" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">1. Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#conda">1.1. Conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#from-source">1.2. From Source</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">2. Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#basic-architecture">2.1. Basic Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#command-line-interface">2.2. Command-line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#configuration">2.3. Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../multiagent/index.html">3. Multi-Agent</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../multiagent/social_force_model.html">3.1. Social Force Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiagent/algorithms.html">3.2. Algorithms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/algorithms.html#n-body-simulations">3.2.1. N-Body Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/algorithms.html#brute-force">3.2.2. Brute Force</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/algorithms.html#spatial-partitioning-algorithms">3.2.3. Spatial Partitioning Algorithms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../multiagent/algorithms.html#block-list">3.2.3.1. Block List</a></li>
<li class="toctree-l4"><a class="reference internal" href="../multiagent/algorithms.html#convex-hull">3.2.3.2. Convex Hull</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/algorithms.html#parallelisation">3.2.4. Parallelisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/algorithms.html#refences">3.2.5. Refences</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../multiagent/adjusting.html">3.3. Adjusting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/adjusting.html#force">3.3.1. Force</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/adjusting.html#torque">3.3.2. Torque</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/adjusting.html#subgroups">3.3.3. Subgroups</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../multiagent/adjusting.html#attractor-point">3.3.3.1. Attractor point</a></li>
<li class="toctree-l4"><a class="reference internal" href="../multiagent/adjusting.html#intra-subgroup-adjusting-force">3.3.3.2. Intra-subgroup adjusting force</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../multiagent/interactions.html">3.4. Interactions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/interactions.html#social-force">3.4.1. Social Force</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/interactions.html#physical-contact">3.4.2. Physical Contact</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/interactions.html#torque">3.4.3. Torque</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../multiagent/fluctuation.html">3.5. Fluctuation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/fluctuation.html#force">3.5.1. Force</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/fluctuation.html#torque">3.5.2. Torque</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../multiagent/integrator.html">3.6. Integrator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiagent/navigation.html">3.7. Navigation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/navigation.html#distance-map-and-static-potential">3.7.1. Distance map and static potential</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/navigation.html#dynamic-potential">3.7.2. Dynamic potential</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/navigation.html#implementation">3.7.3. Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiagent/navigation.html#references">3.7.4. References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cellular/index.html">4. Cellular Automata</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../continuum/index.html">5. Continuum Flow</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">6. API</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">6.1. Core</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-crowddynamics.core.vector2D">6.1.1. Vector2D</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-crowddynamics.core.motion">6.1.2. Motion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-crowddynamics.core.interactions">6.1.3. Interactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-crowddynamics.core.steering">6.1.4. Steering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-crowddynamics.core.integrator">6.1.5. Integrator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="io.html">6.2. IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="sampling.html">6.3. Sampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="simulation.html">6.4. Simulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="simulation.html#agent">6.4.1. Agent</a></li>
<li class="toctree-l3"><a class="reference internal" href="simulation.html#module-crowddynamics.multiagent">6.4.2. Multi-Agent</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cli.html">6.5. Command-line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui.html">6.6. Graphical User Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="game.html">6.7. Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="game.html#module-crowddynamics.plugins.game">6.7.1. Game</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../research/index.html">7. Research</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../research/phenomena.html">7.1. Phenomena</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../research/phenomena.html#egress-congestion">7.1.1. Egress Congestion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/phenomena.html#faster-is-slower">7.1.2. Faster is slower</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/phenomena.html#arching">7.1.3. Arching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/phenomena.html#zipper-effect">7.1.4. Zipper effect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/phenomena.html#herding">7.1.5. Herding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/phenomena.html#lane-formation">7.1.6. Lane formation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/phenomena.html#freezing-by-heat">7.1.7. Freezing by heat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/phenomena.html#turbulence">7.1.8. Turbulence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/phenomena.html#stop-and-go-waves">7.1.9. Stop-and-Go waves</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/phenomena.html#braess-s-paradox">7.1.10. Braess&#8217;s paradox</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../research/simulations.html">7.2. Simulations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../research/simulations.html#outdoor">7.2.1. Outdoor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/simulations.html#hallway">7.2.2. Hallway</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/simulations.html#crossing">7.2.3. Crossing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/simulations.html#evacuation">7.2.4. Evacuation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../research/simulations.html#turning">7.2.5. Turning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../research/applications.html">7.3. Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../foundations/index.html">8. Foundations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../foundations/theory.html">8.1. Mathematical Foundations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../foundations/theory.html#time">8.1.1. Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../foundations/theory.html#geometry">8.1.2. Geometry</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../foundations/theory.html#domain">8.1.2.1. Domain</a></li>
<li class="toctree-l4"><a class="reference internal" href="../foundations/theory.html#obstacle">8.1.2.2. Obstacle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../foundations/theory.html#exit">8.1.2.3. Exit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../foundations/theory.html#narrow-bottleneck">8.1.2.4. Narrow bottleneck</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../foundations/theory.html#agent">8.1.3. Agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../foundations/theory.html#model">8.1.3.1. Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../foundations/theory.html#circular-model">8.1.3.2. Circular model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../foundations/theory.html#elliptical-model">8.1.3.3. Elliptical model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../foundations/theory.html#three-circle-model">8.1.3.4. Three circle model</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../foundations/theory.html#initial-configuration">8.1.4. Initial configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../foundations/quantities.html">8.2. Quantities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../foundations/quantities.html#density">8.2.1. Density</a></li>
<li class="toctree-l3"><a class="reference internal" href="../foundations/quantities.html#flow">8.2.2. Flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../foundations/quantities.html#rate">8.2.2.1. Rate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../foundations/quantities.html#types">8.2.2.2. Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../foundations/quantities.html#pressure">8.2.3. Pressure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../foundations/quantities.html#fundamental-diagram">8.2.4. Fundamental Diagram</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Crowd Dynamics</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">6. API</a> &raquo;</li>
      
    <li>6.1. Core</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api/core.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="core">
<h1>6.1. Core<a class="headerlink" href="#core" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-crowddynamics.core.vector2D">
<span id="vector2d"></span><h2>6.1.1. Vector2D<a class="headerlink" href="#module-crowddynamics.core.vector2D" title="Permalink to this headline">¶</a></h2>
<dl class="attribute">
<dt id="crowddynamics.core.vector2D.rotate90">
<code class="descclassname">crowddynamics.core.vector2D.</code><code class="descname">rotate90</code><a class="reference internal" href="../_modules/crowddynamics/core/vector2D/vector2D.html#rotate90"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.vector2D.rotate90" title="Permalink to this definition">¶</a></dt>
<dd><p>90 degree counterclockwise rotation for 2D vector.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vec2d</strong> (<em>numpy.ndarray</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.vector2D.rotate270">
<code class="descclassname">crowddynamics.core.vector2D.</code><code class="descname">rotate270</code><a class="reference internal" href="../_modules/crowddynamics/core/vector2D/vector2D.html#rotate270"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.vector2D.rotate270" title="Permalink to this definition">¶</a></dt>
<dd><p>90 degree clockwise rotation for 2D vector.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vec2d</strong> (<em>numpy.ndarray</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.vector2D.angle">
<code class="descclassname">crowddynamics.core.vector2D.</code><code class="descname">angle</code><a class="reference internal" href="../_modules/crowddynamics/core/vector2D/vector2D.html#angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.vector2D.angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle of 2d vector in radians.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vec2d</strong> (<em>numpy.ndarray</em>) &#8211; 2D vector</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Angle in [-pi, pi]</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.vector2D.angle_nx2">
<code class="descclassname">crowddynamics.core.vector2D.</code><code class="descname">angle_nx2</code><a class="reference internal" href="../_modules/crowddynamics/core/vector2D/vector2D.html#angle_nx2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.vector2D.angle_nx2" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle of 2d vectors in radians.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vec2d</strong> (<em>numpy.ndarray</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.vector2D.length">
<code class="descclassname">crowddynamics.core.vector2D.</code><code class="descname">length</code><a class="reference internal" href="../_modules/crowddynamics/core/vector2D/vector2D.html#length"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.vector2D.length" title="Permalink to this definition">¶</a></dt>
<dd><p>Length</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vec2d</strong> (<em>numpy.ndarray</em>) &#8211; 2D vector</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Length of the vector in [0, infty)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.vector2D.length_nx2">
<code class="descclassname">crowddynamics.core.vector2D.</code><code class="descname">length_nx2</code><a class="reference internal" href="../_modules/crowddynamics/core/vector2D/vector2D.html#length_nx2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.vector2D.length_nx2" title="Permalink to this definition">¶</a></dt>
<dd><p>Length</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vec2d</strong> (<em>numpy.ndarray</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.vector2D.dot2d">
<code class="descclassname">crowddynamics.core.vector2D.</code><code class="descname">dot2d</code><a class="reference internal" href="../_modules/crowddynamics/core/vector2D/vector2D.html#dot2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.vector2D.dot2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Dot product for 2D vectors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>v0</strong> (<em>numpy.ndarray</em>) &#8211; </li>
<li><strong>v1</strong> (<em>numpy.ndarray</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.vector2D.cross2d">
<code class="descclassname">crowddynamics.core.vector2D.</code><code class="descname">cross2d</code><a class="reference internal" href="../_modules/crowddynamics/core/vector2D/vector2D.html#cross2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.vector2D.cross2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Cross product for 2D vectors. Right corner from 3D cross product.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>v0</strong> (<em>numpy.ndarray</em>) &#8211; </li>
<li><strong>v1</strong> (<em>numpy.ndarray</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.vector2D.normalize">
<code class="descclassname">crowddynamics.core.vector2D.</code><code class="descname">normalize</code><a class="reference internal" href="../_modules/crowddynamics/core/vector2D/vector2D.html#normalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.vector2D.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vec2d</strong> (<em>numpy.ndarray</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.vector2D.normalize_nx2">
<code class="descclassname">crowddynamics.core.vector2D.</code><code class="descname">normalize_nx2</code><a class="reference internal" href="../_modules/crowddynamics/core/vector2D/vector2D.html#normalize_nx2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.vector2D.normalize_nx2" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vec2d</strong> (<em>numpy.ndarray</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.vector2D.truncate">
<code class="descclassname">crowddynamics.core.vector2D.</code><code class="descname">truncate</code><a class="reference internal" href="../_modules/crowddynamics/core/vector2D/vector2D.html#truncate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.vector2D.truncate" title="Permalink to this definition">¶</a></dt>
<dd><p>Truncate</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>vec2d</strong> (<em>numpy.ndarray</em>) &#8211; </li>
<li><strong>limit</strong> (<em>float</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-crowddynamics.core.motion">
<span id="motion"></span><h2>6.1.2. Motion<a class="headerlink" href="#module-crowddynamics.core.motion" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="crowddynamics.core.motion.force_fluctuation">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">force_fluctuation</code><span class="sig-paren">(</span><em>mass</em>, <em>scale</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/crowddynamics/core/motion/force.html#force_fluctuation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.force_fluctuation" title="Permalink to this definition">¶</a></dt>
<dd><p>Truncated normal distribution with standard deviation of 3.</p>
<div class="math">
\[\boldsymbol{\xi} = \xi \cdot \mathbf{\hat{e}}(\varphi)\]</div>
<p>where</p>
<div class="math">
\[\begin{split}\xi \sim \mathcal{N}(\mu, \sigma^{2}) \\
\varphi \sim \mathcal{U}(-\pi, \pi)\end{split}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mass</strong> (<em>float</em>) &#8211; Mass</li>
<li><strong>scale</strong> (<em>float</em>) &#8211; Standard deviation of truncated normal distribution</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Fluctuation force</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.motion.force_adjust">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">force_adjust</code><a class="reference internal" href="../_modules/crowddynamics/core/motion/force.html#force_adjust"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.force_adjust" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Adjusting</em> aka <em>driving</em> force accounts of agent&#8217;s desire to reach a
certain destination. In high crowd densities term <em>manoeuvring</em> is used.
Force affecting the agent takes form</p>
<div class="math">
\[\mathbf{f}_{adj} = \frac{m}{\tau_{adj}} (v_{0} \mathbf{\hat{e}_{0}} - \mathbf{v}),\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mass</strong> (<em>float</em>) &#8211; Mass</li>
<li><strong>tau_adj</strong> (<em>float</em>) &#8211; Characteristic time <span class="math">\(\tau_{adj}\)</span> time for agent to adjust it
movement. Value <span class="math">\(0.5\)</span> is often used, but for example impatient
agent that tend to push other agent more this value can be reduced.</li>
<li><strong>v0</strong> (<em>float</em>) &#8211; Target velocity <span class="math">\(v_{0}\)</span> is usually <em>average walking speed</em> for
agent in its current situation.</li>
<li><strong>e0</strong> (<em>numpy.ndarray</em>) &#8211; Target direction <span class="math">\(\mathbf{\hat{e}_{0}}\)</span> is solved by
<em>navigation</em> or <em>path planning</em> algorithm. More details in the
navigation section.</li>
<li><strong>v</strong> (<em>numpy.ndarray</em>) &#8211; Velocity</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.motion.force_social_helbing">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">force_social_helbing</code><a class="reference internal" href="../_modules/crowddynamics/core/motion/force.html#force_social_helbing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.force_social_helbing" title="Permalink to this definition">¶</a></dt>
<dd><p>Helbing&#8217;s model&#8217;s original social force. Independent of the velocity or
direction of the agent.</p>
<div class="math">
\[A \exp(-h / B) \mathbf{\hat{n}}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>h</strong> (<em>float</em>) &#8211; Skin-to-skin distance between agents</li>
<li><strong>n</strong> (<em>numpy.ndarray</em>) &#8211; Normal unit vector</li>
<li><strong>a</strong> (<em>float</em>) &#8211; Constant <span class="math">\(A = 2 \cdot 10^{3} \,\mathrm{N}\)</span></li>
<li><strong>b</strong> (<em>float</em>) &#8211; Constant <span class="math">\(B = 0.08 \,\mathrm{m}\)</span></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Social force</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.motion.force_contact">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">force_contact</code><a class="reference internal" href="../_modules/crowddynamics/core/motion/force.html#force_contact"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.force_contact" title="Permalink to this definition">¶</a></dt>
<dd><p>Physical contact force with damping. Helbing&#8217;s original model did not
include damping, which was added by Langston.</p>
<div class="math">
\[\mathbf{f}^{c} = - h \cdot \left(\mu \cdot \hat{\mathbf{n}} -
\kappa \cdot (\mathbf{v} \cdot \hat{\mathbf{t}}) \hat{\mathbf{t}}\right) +
c_{n} \cdot (\mathbf{v} \cdot \hat{\mathbf{n}}) \hat{\mathbf{n}}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>h</strong> (<em>float</em>) &#8211; Skin-to-skin distance between agents</li>
<li><strong>n</strong> (<em>numpy.ndarray</em>) &#8211; Normal vector</li>
<li><strong>v</strong> (<em>numpy.ndarray</em>) &#8211; Velocity vector</li>
<li><strong>t</strong> (<em>numpy.ndarray</em>) &#8211; Tangent vector</li>
<li><strong>mu</strong> (<em>float</em>) &#8211; Constant <span class="math">\(1.2 \cdot 10^{5}\,\mathrm{kg\,s^{-2}}\)</span></li>
<li><strong>kappa</strong> (<em>float</em>) &#8211; Constant <span class="math">\(4.0 \cdot 10^{4}\,\mathrm{kg\,m^{-1}s^{-1}}\)</span></li>
<li><strong>damping</strong> (<em>float</em>) &#8211; Constant <span class="math">\(500 \,\mathrm{N}\)</span></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Contact force</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="crowddynamics.core.motion.torque_fluctuation">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">torque_fluctuation</code><span class="sig-paren">(</span><em>inertia_rot</em>, <em>scale</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/crowddynamics/core/motion/torque.html#torque_fluctuation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.torque_fluctuation" title="Permalink to this definition">¶</a></dt>
<dd><p>Random torque.</p>
<div class="math">
\[\eta \sim \mathcal{N}(\mu, \sigma^{2})\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>inertia_rot</strong> (<em>float</em>) &#8211; Rotational intertial</li>
<li><strong>scale</strong> (<em>float</em>) &#8211; Standard deviation of truncated normal distribution</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Fluctuation torque</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.motion.torque_adjust">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">torque_adjust</code><a class="reference internal" href="../_modules/crowddynamics/core/motion/torque.html#torque_adjust"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.torque_adjust" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjusting torque account for agent&#8217;s desire to rotate it orientation.</p>
<div class="math">
\[M_{adj} = \frac{I_{rot}}{\tau_{rot}} \left( \omega_{0} \left (
          \frac{\varphi - \varphi_{0}}{\pi} \right ) - \omega\right),\]</div>
<p>Angular difference <span class="math">\(\varphi - \varphi_{0}\)</span> is wrapped between interval
<span class="math">\([-\pi, \pi]\)</span> so that division by <span class="math">\(\pi\)</span> returns value between
<span class="math">\([-1, 1]\)</span>. This gives direction and magnitude for the torque.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>inertia_rot</strong> (<em>float</em>) &#8211; Rotational inertia</li>
<li><strong>tau_rot</strong> (<em>float</em>) &#8211; Characteristic time <span class="math">\(\tau_{rot}\)</span> time for agent to adjust it
orientation.</li>
<li><strong>phi_0</strong> (<em>float</em>) &#8211; Target orientation <span class="math">\(\varphi_{0}\)</span>. In low and medium crowd
densities the angle of the target direction can be sufficient for
target orientation. In high crowd densities agents may twist their
body differently for example to try to squeeze through narrow
spaces, requiring more sophisticated algorithms.</li>
<li><strong>phi</strong> (<em>float</em>) &#8211; Current orientation <span class="math">\(\varphi\)</span></li>
<li><strong>omega_0</strong> (<em>float</em>) &#8211; Maximum angular velocity <span class="math">\(\omega_{0}\)</span>.</li>
<li><strong>omega</strong> (<em>float</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.motion.magnitude">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">magnitude</code><a class="reference internal" href="../_modules/crowddynamics/core/motion/power_law.html#magnitude"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.magnitude" title="Permalink to this definition">¶</a></dt>
<dd><p>Magnitude of social force.</p>
<div class="math">
\[\left(\frac{1}{\tau^{2}}\right) \left(\frac{2}{\tau} + \frac{1}{\tau_{0}}\right) \exp\left (-\frac{\tau}{\tau_{0}}\right )\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tau</strong> (<em>float</em>) &#8211; Time-to-collision</li>
<li><strong>tau_0</strong> (<em>float</em>) &#8211; Interaction time horizon</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Magnitude</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.motion.gradient_circle_circle">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">gradient_circle_circle</code><a class="reference internal" href="../_modules/crowddynamics/core/motion/power_law.html#gradient_circle_circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.gradient_circle_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Gradient of <span class="math">\(\tau\)</span> between two circles.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_rel</strong> (<em>numpy.ndarray</em>) &#8211; Relative position of the centers of mass.
<span class="math">\(\tilde{x} = x_i - x_j\)</span></li>
<li><strong>v_rel</strong> (<em>numpy.ndarray</em>) &#8211; Relative velocity between two agents.
<span class="math">\(\tilde{v} = v_i - v_j\)</span></li>
<li><strong>a</strong> (<em>float</em>) &#8211; </li>
<li><strong>b</strong> (<em>float</em>) &#8211; </li>
<li><strong>d</strong> (<em>float</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.motion.gradient_three_circle">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">gradient_three_circle</code><a class="reference internal" href="../_modules/crowddynamics/core/motion/power_law.html#gradient_three_circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.gradient_three_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Gradient of <span class="math">\(\tau\)</span> between two three-circle representations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_rel</strong> (<em>numpy.ndarray</em>) &#8211; </li>
<li><strong>v_rel</strong> (<em>numpy.ndarray</em>) &#8211; </li>
<li><strong>r_off</strong> (<em>numpy.ndarray</em>) &#8211; </li>
<li><strong>a</strong> (<em>float</em>) &#8211; </li>
<li><strong>b</strong> (<em>float</em>) &#8211; </li>
<li><strong>d</strong> (<em>float</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.motion.gradient_circle_line">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">gradient_circle_line</code><a class="reference internal" href="../_modules/crowddynamics/core/motion/power_law.html#gradient_circle_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.gradient_circle_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Circle line</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>v</strong> &#8211; </li>
<li><strong>n</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns:</p>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.motion.force_social_circular">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">force_social_circular</code><a class="reference internal" href="../_modules/crowddynamics/core/motion/power_law.html#force_social_circular"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.force_social_circular" title="Permalink to this definition">¶</a></dt>
<dd><p>Social force based on human anticipatory behaviour.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>agent</strong> &#8211; </li>
<li><strong>i</strong> &#8211; </li>
<li><strong>j</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns:</p>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.motion.force_social_three_circle">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">force_social_three_circle</code><a class="reference internal" href="../_modules/crowddynamics/core/motion/power_law.html#force_social_three_circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.force_social_three_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimium time-to-collision for two circles of relative displacements.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>agent</strong> &#8211; </li>
<li><strong>i</strong> &#8211; </li>
<li><strong>j</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns:</p>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.motion.force_social_linear_wall">
<code class="descclassname">crowddynamics.core.motion.</code><code class="descname">force_social_linear_wall</code><a class="reference internal" href="../_modules/crowddynamics/core/motion/power_law.html#force_social_linear_wall"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.motion.force_social_linear_wall" title="Permalink to this definition">¶</a></dt>
<dd><p>Force social linear wall</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>i</strong> &#8211; </li>
<li><strong>w</strong> &#8211; </li>
<li><strong>agent</strong> &#8211; </li>
<li><strong>wall</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns:</p>
</dd></dl>

</div>
<div class="section" id="module-crowddynamics.core.interactions">
<span id="interactions"></span><h2>6.1.3. Interactions<a class="headerlink" href="#module-crowddynamics.core.interactions" title="Permalink to this headline">¶</a></h2>
<dl class="attribute">
<dt id="crowddynamics.core.interactions.distance_circle_circle">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">distance_circle_circle</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/distance.html#distance_circle_circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.distance_circle_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Skin-to-Skin distance <span class="math">\(h\)</span>  with normal <span class="math">\(\mathbf{\hat{n}}\)</span>
between two circles.</p>
<div class="math">
\[\begin{split}h &amp;= \|\mathbf{x}_0 - \mathbf{x}_1\| - (r_0 + r_1) \\
\mathbf{\hat{n}} &amp;= \frac{\mathbf{x}_0 - \mathbf{x}_1}{\|\mathbf{x}_0 - \mathbf{x}_1\|}\end{split}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x0</strong> (<em>numpy.ndarray</em>) &#8211; </li>
<li><strong>r0</strong> (<em>float</em>) &#8211; </li>
<li><strong>x1</strong> (<em>numpy.ndarray</em>) &#8211; </li>
<li><strong>r1</strong> (<em>float</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">(skin-to-skin distance, normal vector)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(float, numpy.ndarray)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.distance_three_circle">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">distance_three_circle</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/distance.html#distance_three_circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.distance_three_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Skin-to-Skin distance <span class="math">\(h\)</span> with normal <span class="math">\(\mathbf{\hat{n}}\)</span> and
rotational moments <span class="math">\(\mathbf{r}_{\mathrm{moment}_i}\)</span> between two three-circle
models with.</p>
<div class="math">
\[\begin{split}X_i &amp;= \{\mathbf{x}_{torso}, \mathbf{x}_{left shoulder}, \mathbf{x}_{right shoulder}&nbsp;\} \\
R_i &amp;= \{r_{torso}, r_{shoulder}, r_{shoulder}&nbsp;\}\end{split}\]</div>
<div class="math">
\[h = \min_{(\mathbf{x}_0, r_0) \in (X_0, R_0)} \min_{(\mathbf{x}_1, r_1) \in (X_1, R_1)} \left( \|\mathbf{x}_0 - \mathbf{x}_1\| - (r_0 + r_1) \right)\]</div>
<p>With minimized values of <span class="math">\(\mathbf{x}_0\)</span>, <span class="math">\(\mathbf{x}_1\)</span>,
<span class="math">\(r_0\)</span> and <span class="math">\(r_1\)</span> compute</p>
<div class="math">
\[\begin{split}\mathbf{\hat{n}} &amp;= \frac{\mathbf{x}_0 - \mathbf{x}_1}{\|\mathbf{x}_0 - \mathbf{x}_1\|} \\
\mathbf{r}_{\mathrm{moment}_0} &amp;= \mathbf{x}_0 + r_0 \mathbf{\hat{n}} - \mathbf{x}_{\mathrm{torso}} \\
\mathbf{r}_{\mathrm{moment}_1} &amp;= \mathbf{x}_1 - r_1 \mathbf{\hat{n}} - \mathbf{x}_{\mathrm{torso}}\end{split}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x0</strong> (<em></em><em>(</em><em>numpy.ndarray</em><em>, </em><em>numpy.ndarray</em><em>, </em><em>numpy.ndarray</em><em>)</em><em></em>) &#8211; </li>
<li><strong>r0</strong> (<em></em><em>(</em><em>float</em><em>, </em><em>float</em><em>, </em><em>float</em><em>)</em><em></em>) &#8211; </li>
<li><strong>x1</strong> (<em></em><em>(</em><em>numpy.ndarray</em><em>, </em><em>numpy.ndarray</em><em>, </em><em>numpy.ndarray</em><em>)</em><em></em>) &#8211; </li>
<li><strong>r1</strong> (<em></em><em>(</em><em>float</em><em>, </em><em>float</em><em>, </em><em>float</em><em>)</em><em></em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(float, numpy.ndarray, numpy.ndarray, numpy.ndarray)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.distance_circle_line">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">distance_circle_line</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/distance.html#distance_circle_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.distance_circle_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Skin-to-Skin distance between circle and line</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>numpy.ndarray</em>) &#8211; </li>
<li><strong>r</strong> (<em>float</em>) &#8211; </li>
<li><strong>p</strong> (<em>numpy.ndarray</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">(skin-to-skin distance, normal vector)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(float, numpy.ndarray)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.distance_three_circle_line">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">distance_three_circle_line</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/distance.html#distance_three_circle_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.distance_three_circle_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Skin-to-Skin distance between three circle model and line</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em></em><em>(</em><em>numpy.ndarray</em><em>, </em><em>numpy.ndarray</em><em>, </em><em>numpy.ndarray</em><em>)</em><em></em>) &#8211; </li>
<li><strong>r</strong> (<em></em><em>(</em><em>float</em><em>, </em><em>float</em><em>, </em><em>float</em><em>)</em><em></em>) &#8211; </li>
<li><strong>p</strong> (<em>numpy.ndarray</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(float, numpy.ndarray, numpy.ndarray)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.overlapping_circle_circle">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">overlapping_circle_circle</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/distance.html#overlapping_circle_circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.overlapping_circle_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if two circles are overlapping.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> &#8211; </li>
<li><strong>r</strong> &#8211; </li>
<li><strong>start_index</strong> &#8211; </li>
<li><strong>i</strong> &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.overlapping_three_circle">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">overlapping_three_circle</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/distance.html#overlapping_three_circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.overlapping_three_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if two three-circle models are overlapping.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>collections.namedtuple</em>) &#8211; Attributes:
- position=numpy.ndarray
- position_ls=numpy.ndarray
- position_rs=numpy.ndarray</li>
<li><strong>r</strong> (<em>collections.namedtuple</em>) &#8211; Attributes:
- r_t
- r_s</li>
<li><strong>start_index</strong> &#8211; </li>
<li><strong>i</strong> &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.block_list">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">block_list</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/partitioning.html#block_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.block_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Block list</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>points</strong> (<em>numpy.ndarray</em>) &#8211; Array of points</li>
<li><strong>cell_width</strong> (<em>float</em>) &#8211; Width/height of the rectangular mesh.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">(index_list, count, offset, x_min, x_max)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(numpy.ndarray, numpy.ndarray, numpy.ndarray, numpy.ndarray, numpy.ndarray)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="crowddynamics.core.interactions.BlockList">
<em class="property">class </em><code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">BlockList</code><span class="sig-paren">(</span><em>points</em>, <em>cell_width</em><span class="sig-paren">)</span><a class="headerlink" href="#crowddynamics.core.interactions.BlockList" title="Permalink to this definition">¶</a></dt>
<dd><p>BlockList algorithm partitions space into squares and sorts points into
the square they belong. This allows fast neighbourhood search because we
only have to search current and neighbouring rectangles for points.</p>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.agent_agent_brute">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">agent_agent_brute</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/interactions.html#agent_agent_brute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.agent_agent_brute" title="Permalink to this definition">¶</a></dt>
<dd><p>Interaction forces between set of agents.</p>
<p>Computational complexity (number of iterations)</p>
<div class="math">
\[n - 1 + n - 2 + ... + 1 = n^{2} / 2 \in \mathcal{O}(n^2)\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>agent</strong> (<a class="reference internal" href="simulation.html#crowddynamics.multiagent.Agent" title="crowddynamics.multiagent.Agent"><em>Agent</em></a>) &#8211; </li>
<li><strong>indices</strong> (<em>numpy.ndarray</em>) &#8211; Subset of <code class="docutils literal"><span class="pre">agent.indices</span></code>. If equal to <code class="docutils literal"><span class="pre">agent.indices</span></code> then
brute force over all agents.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Inplace operation.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.agent_agent_brute_disjoint">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">agent_agent_brute_disjoint</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/interactions.html#agent_agent_brute_disjoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.agent_agent_brute_disjoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Interaction forces between two disjoint sets of agents. Assumes sets
<code class="docutils literal"><span class="pre">indices</span></code> (<span class="math">\(S_{0}\)</span>) and <code class="docutils literal"><span class="pre">indices2</span></code> (<span class="math">\(S_{1}\)</span>) should be
disjoint</p>
<div class="math">
\[S_{0} \cap S_{1} = \emptyset\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>agent</strong> (<a class="reference internal" href="simulation.html#crowddynamics.multiagent.Agent" title="crowddynamics.multiagent.Agent"><em>Agent</em></a>) &#8211; </li>
<li><strong>indices_0</strong> (<em>numpy.ndarray</em>) &#8211; </li>
<li><strong>indices_1</strong> (<em>numpy.ndarray</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Inplace operation.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.agent_agent_block_list">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">agent_agent_block_list</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/interactions.html#agent_agent_block_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.agent_agent_block_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Iteration over all agents using block list algorithm.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>agent</strong> (<a class="reference internal" href="simulation.html#crowddynamics.multiagent.Agent" title="crowddynamics.multiagent.Agent"><em>Agent</em></a>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Inplace operation.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.agent_wall">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">agent_wall</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/interactions.html#agent_wall"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.agent_wall" title="Permalink to this definition">¶</a></dt>
<dd><p>Agent wall</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>agent</strong> &#8211; </li>
<li><strong>wall</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.agent_agent_interaction_circle">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">agent_agent_interaction_circle</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/interactions.html#agent_agent_interaction_circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.agent_agent_interaction_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Interaction between two circular agents.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>i</strong> &#8211; </li>
<li><strong>j</strong> &#8211; </li>
<li><strong>agent</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.agent_agent_interaction_three_circle">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">agent_agent_interaction_three_circle</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/interactions.html#agent_agent_interaction_three_circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.agent_agent_interaction_three_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Interaction between two three circle agents.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>i</strong> &#8211; </li>
<li><strong>j</strong> &#8211; </li>
<li><strong>agent</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns:</p>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.agent_obstacle_interaction_circle">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">agent_obstacle_interaction_circle</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/interactions.html#agent_obstacle_interaction_circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.agent_obstacle_interaction_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Interaction between circular agent and line obstacle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>i</strong> &#8211; </li>
<li><strong>w</strong> &#8211; </li>
<li><strong>agent</strong> &#8211; </li>
<li><strong>wall</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.interactions.agent_obstacle_interaction_three_circle">
<code class="descclassname">crowddynamics.core.interactions.</code><code class="descname">agent_obstacle_interaction_three_circle</code><a class="reference internal" href="../_modules/crowddynamics/core/interactions/interactions.html#agent_obstacle_interaction_three_circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.interactions.agent_obstacle_interaction_three_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Interaction between three circle agent and line obstacle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>i</strong> &#8211; </li>
<li><strong>w</strong> &#8211; </li>
<li><strong>agent</strong> &#8211; </li>
<li><strong>wall</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-crowddynamics.core.steering">
<span id="steering"></span><h2>6.1.4. Steering<a class="headerlink" href="#module-crowddynamics.core.steering" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="crowddynamics.core.steering.distance_map">
<code class="descclassname">crowddynamics.core.steering.</code><code class="descname">distance_map</code><span class="sig-paren">(</span><em>step</em>, <em>domain</em>, <em>targets</em>, <em>obstacles</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/crowddynamics/core/steering/navigation.html#distance_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.steering.distance_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Distance map <span class="math">\(S(\mathbf{x})\)</span> is obtained by solving <em>Eikonal equation</em>
using fast marching <em>Fast Marching Method (FMM)</em> (<code class="docutils literal"><span class="pre">scikit-fmm</span></code>).</p>
<div class="math">
\[\left \| \nabla S(\mathbf{x}) \right \| = \frac{1}{f(\mathbf{x})}, \quad \mathbf{x} \in \Omega\]</div>
<p>where</p>
<ul class="simple">
<li>Function <span class="math">\(f : \bar{\Omega} \mapsto (0, +\infty)\)</span> is the speed of
travel at <span class="math">\(\mathbf{x}\)</span></li>
</ul>
<p>Boundary conditions for the distance map</p>
<div class="math">
\[\begin{split}\begin{cases}
S(\mathbf{x}) = 0, &amp; \mathbf{x} \in \mathcal{E} \\
S(\mathbf{x}) \to \infty, &amp; \mathbf{x} \in \mathcal{O}
\end{cases}\end{split}\]</div>
<p>Initial values for speed</p>
<div class="math">
\[\begin{split}\begin{cases}
f(\mathbf{x}) &amp;= 1, &amp; \mathbf{x} \in \Omega \setminus \mathcal{O} \\
f(\mathbf{x}) &amp;\to 0, &amp; \mathbf{x} \in \mathcal{O}
\end{cases}\end{split}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>step</strong> (<em>float</em>) &#8211; Step size for the meshgrid.</li>
<li><strong>domain</strong> (<em>Polygon</em>) &#8211; Domain <span class="math">\(\Omega\)</span> containing obstacles and targets.</li>
<li><strong>obstacles</strong> (<em>LineString</em><em>, </em><em>optional</em>) &#8211; Impassable regions <span class="math">\(\mathcal{O}\)</span> in the domain.</li>
<li><strong>targets</strong> (<em>LineString</em><em>, </em><em>optional</em>) &#8211; Target regions <span class="math">\(\mathcal{E}\)</span> in the domain.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">(mgrid, dmap, phi)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(numpy.meshgrid, numpy.ndarray, numpy.ma.MaskedArray)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="crowddynamics.core.steering.travel_time_map">
<code class="descclassname">crowddynamics.core.steering.</code><code class="descname">travel_time_map</code><span class="sig-paren">(</span><em>step</em>, <em>domain</em>, <em>targets</em>, <em>obstacles</em>, <em>agents</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/crowddynamics/core/steering/navigation.html#travel_time_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.steering.travel_time_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Dynamics potential takes into account the positions of the agents in the field. Equation</p>
<div class="math">
\[\left \| \nabla T(\mathbf{x}) \right \| = \frac{1}{f(\mathbf{x})}, \quad \mathbf{x} \in \Omega\]</div>
<p>and boundary conditions</p>
<div class="math">
\[\begin{split}f(\mathbf{x}) &amp;= 1, \quad \mathbf{x} \in \Omega \setminus (\mathcal{O} \cup \mathcal{A}) \\
f(\mathbf{x}) &amp;\leq 1, \quad \mathbf{x} \in \mathcal{A} \\
f(\mathbf{x}) &amp;\to 0, \quad \mathbf{x} \in \mathcal{O}\end{split}\]</div>
<div class="math">
\[\frac{1}{f(\mathbf{x})} = 1 + \max&nbsp;\left( 0, c_{0} \left( 1 + c_{1} \frac{\mathbf{v} \cdot \nabla S(\mathbf{x})}{v_{0} \| \nabla S(\mathbf{x}) \|}&nbsp;\right) \right)\]</div>
<ul class="simple">
<li><span class="math">\(c_{0} &gt; 0\)</span> general impact strength</li>
<li><span class="math">\(c_{1} &gt; 0\)</span> impact of the moving direction of an agent</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>step</strong> (<em>float</em>) &#8211; Step size for the meshgrid.</li>
<li><strong>domain</strong> (<em>Polygon</em>) &#8211; Domain <span class="math">\(\Omega\)</span> containing obstacles and targets.</li>
<li><strong>obstacles</strong> (<em>LineString</em><em>, </em><em>optional</em>) &#8211; Impassable regions <span class="math">\(\mathcal{O}\)</span> in the domain.</li>
<li><strong>targets</strong> (<em>LineString</em><em>, </em><em>optional</em>) &#8211; Target regions <span class="math">\(\mathcal{E}\)</span> in the domain.</li>
<li><strong>agents</strong> &#8211; Regions occupied by agents <span class="math">\(\mathcal{A}\)</span></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(numpy.meshgrid, numpy.ndarray, numpy.ma.MaskedArray)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="crowddynamics.core.steering.direction_map">
<code class="descclassname">crowddynamics.core.steering.</code><code class="descname">direction_map</code><span class="sig-paren">(</span><em>dmap</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/crowddynamics/core/steering/navigation.html#direction_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.steering.direction_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalized gradient of distance map.</p>
<div class="math">
\[\hat{\mathbf{e}}_{S} = -\frac{\nabla S(\mathbf{x})}{\| \nabla S(\mathbf{x}) \|}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dmap</strong> (<em>numpy.ndarray</em>) &#8211; Distance map.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Direction map. Array of shape: <code class="docutils literal"><span class="pre">dmap.shape</span> <span class="pre">+</span> <span class="pre">(2,)</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="crowddynamics.core.steering.merge_dir_maps">
<code class="descclassname">crowddynamics.core.steering.</code><code class="descname">merge_dir_maps</code><a class="reference internal" href="../_modules/crowddynamics/core/steering/navigation.html#merge_dir_maps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.steering.merge_dir_maps" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that merges two direction maps together. Let distance map from
obstacles be <span class="math">\(\Phi(\mathbf{x})\)</span> and <span class="math">\(\lambda(\Phi(\mathbf{x}))\)</span>
be any decreasing function of distance from obstacles such that</p>
<div class="math">
\[\begin{split}\lambda(\Phi) &amp;=
\begin{cases}
1 &amp; \Phi = 0 \\
0 &amp; \Phi &gt; M &gt; 0
\end{cases}\end{split}\]</div>
<p>Then merged direction map <span class="math">\(\hat{\mathbf{e}}_{merged}\)</span> is</p>
<div class="math">
\[\begin{split}k &amp;= \lambda(\Phi(\mathbf{x})) \\
\hat{\mathbf{e}}_{merged} &amp;= k \hat{\mathbf{e}}_{obs} + (1 - k) \hat{\mathbf{e}}_{exits}\end{split}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dmap</strong> &#8211; </li>
<li><strong>dir_map1</strong> &#8211; </li>
<li><strong>dir_map2</strong> &#8211; </li>
<li><strong>radius</strong> (<em>float</em>) &#8211; Radius</li>
<li><strong>value</strong> (<em>float</em>) &#8211; Value between (0, 1). Value denoting the strength of dir_map1 at
distance of radius.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="crowddynamics.core.steering.static_potential">
<code class="descclassname">crowddynamics.core.steering.</code><code class="descname">static_potential</code><span class="sig-paren">(</span><em>step</em>, <em>domain</em>, <em>exits</em>, <em>obstacles</em>, <em>radius</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/crowddynamics/core/steering/navigation.html#static_potential"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.steering.static_potential" title="Permalink to this definition">¶</a></dt>
<dd><p>Static potential</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>step</strong> (<em>float</em>) &#8211; </li>
<li><strong>domain</strong> (<em>Polygon</em>) &#8211; </li>
<li><strong>exits</strong> (<em>LineString</em><em>, </em><em>optional</em>) &#8211; </li>
<li><strong>obstacles</strong> (<em>LineString</em><em>, </em><em>optional</em>) &#8211; </li>
<li><strong>value</strong> (<em>float</em>) &#8211; </li>
<li><strong>radius</strong> (<em>float</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="crowddynamics.core.steering.dynamic_potential">
<code class="descclassname">crowddynamics.core.steering.</code><code class="descname">dynamic_potential</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/crowddynamics/core/steering/navigation.html#dynamic_potential"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.steering.dynamic_potential" title="Permalink to this definition">¶</a></dt>
<dd><p>Dynamic potential</p>
</dd></dl>

</div>
<div class="section" id="module-crowddynamics.core.integrator">
<span id="integrator"></span><h2>6.1.5. Integrator<a class="headerlink" href="#module-crowddynamics.core.integrator" title="Permalink to this headline">¶</a></h2>
<dl class="attribute">
<dt id="crowddynamics.core.integrator.integrate">
<code class="descclassname">crowddynamics.core.integrator.</code><code class="descname">integrate</code><a class="reference internal" href="../_modules/crowddynamics/core/integrator/integrator.html#integrate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#crowddynamics.core.integrator.integrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Differential system is integrated using numerical integration scheme using
discrete adaptive time step.</p>
<p>Timestep <span class="math">\(\Delta t\)</span> is selected from interval
<span class="math">\([\Delta t_{min}, \Delta t_{max}]\)</span> by bounding the maximum step size
<span class="math">\(\Delta x\)</span> an agent can take per iteration cycle, obtained from</p>
<div class="math">
\[\begin{split}\Delta x = c \Delta t_{max} \max_{i\in A} v_i^0 \\\end{split}\]</div>
<p>where</p>
<ul class="simple">
<li><span class="math">\(c &gt; 0\)</span> is scaling coefficient</li>
<li><span class="math">\(v_i^0\)</span> is agent&#8217;s target velocity</li>
<li><span class="math">\(\max_{i\in A} v_i^0\)</span> is the maximum of all target velocities</li>
</ul>
<p>Timestep is then obtained from</p>
<div class="math">
\[\begin{split}\Delta t_{mid} &amp;= \frac{\Delta x}{\max_{i \in A} v_i} \\
\Delta t &amp;=
\begin{cases}
\Delta t_{min} &amp; \Delta t_{mid} &lt; \Delta t_{min} \\
\Delta t_{mid} &amp;  \\
\Delta t_{max} &amp; \Delta t_{mid} &gt; \Delta t_{max} \\
\end{cases}\end{split}\]</div>
<p>where</p>
<ul class="simple">
<li><span class="math">\(v_i\)</span> is agent&#8217;s current velocity</li>
</ul>
<p>Acceleration on an agent</p>
<div class="math">
\[\begin{split}a_{k} &amp;= \mathbf{f}_{k} / m \\
\mathbf{x}_{k+1} &amp;= \mathbf{x}_{k} + \mathbf{v}_{k} \Delta t + \frac{1}{2} a_{k} \Delta t^{2} \\
\mathbf{v}_{k+1} &amp;= \mathbf{v}_{k} + a_{k} \Delta t \\\end{split}\]</div>
<p>Angular acceleration</p>
<div class="math">
\[\begin{split}\alpha_{k} &amp;= M_{k} / I \\
\varphi_{k+1} &amp;= \varphi_{k} + \omega_{k} \Delta t + \frac{1}{2} \alpha_{k} \Delta t^{2} \\
\omega_{k+1} &amp;= \omega_{k} + \alpha_{k} \Delta t \\\end{split}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>agent</strong> (<a class="reference internal" href="simulation.html#crowddynamics.multiagent.Agent" title="crowddynamics.multiagent.Agent"><em>Agent</em></a>) &#8211; </li>
<li><strong>dt_min</strong> (<em>float</em>) &#8211; Minimum timestep <span class="math">\(\Delta x_{min}\)</span> for adaptive integration.</li>
<li><strong>dt_max</strong> (<em>float</em>) &#8211; Maximum timestep <span class="math">\(\Delta x_{max}\)</span> for adaptive integration.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Timestep <span class="math">\(\Delta t\)</span> that was used for integration.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="io.html" class="btn btn-neutral float-right" title="6.2. IO" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="6. API" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Jaan Tollander de Balsch.
      Last updated on Jan 22, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>